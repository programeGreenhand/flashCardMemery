import{u as Ca,a as La}from"./study-CUwUs_JI.js";import{a as Ia,u as ka}from"./card-DfiZIG2I.js";import{E as R,S as at,G as Vt,H as qe,I as tt,J as Je,K as Ma,L as Ta,M as Pa,N as Ea,O as Oa,P as z,Q as Ra,R as gt,T as Na,U as Yt,V as dt,W as Va,X as Ke,Y as Qe,Z as Ga,$ as za,a0 as ne,a1 as Y,a2 as N,a3 as jt,a4 as Ba,a5 as lt,a6 as rt,a7 as Fa,a8 as Wa,a9 as Ha,aa as Xa,ab as Za,ac as oe,ad as se,ae as $a,af as Ua,ag as It,ah as ta,ai as Ya,aj as ea,ak as kt,al as ja,am as le,an as ue,ao as qa,ap as Ja,aq as Gt,ar as ce,as as Ka,at as ut,au as ct,av as Qa,aw as tr,ax as ht,ay as er,az as ar,aA as ve,aB as he,aC as aa,aD as zt,aE as rr,aF as ir,aG as Bt,aH as fe,aI as ge,aJ as j,aK as de,aL as Ft,aM as nr,aN as or,aO as q,aP as ra,aQ as et,aR as wt,aS as sr,aT as lr,aU as qt,aV as _t,aW as pe,aX as ur,aY as ia,aZ as Jt,a_ as Dt,a$ as Kt,b0 as st,b1 as cr,b2 as me,b3 as ye,b4 as Ct,b5 as Qt,b6 as vr,b7 as be,b8 as Wt,b9 as Se,ba as At,bb as xe,bc as hr,bd as na,be as fr,bf as Ae,bg as gr,bh as dr,bi as pr,bj as mr,bk as _e,bl as De,bm as yr,bn as br,bo as Sr,bp as xr,bq as Ar,_ as _r,br as Dr,bs as wr,bt as Cr,bu as Lr,h as Ir,j as pt,c as nt,bv as kr,k as Mr,a as H,b as M,F as mt,m as yt,t as X,e as Tr,bw as Mt,o as Z,s as Pr,n as Er}from"./index-DYN_J6N2.js";var Or=function(){function r(e){this.coordSysDims=[],this.axisMap=Vt(),this.categoryAxisMap=Vt(),this.coordSysName=e}return r}();function Rr(r){var e=r.get("coordinateSystem"),t=new Or(e),a=Nr[e];if(a)return a(r,t,t.axisMap,t.categoryAxisMap),t}var Nr={cartesian2d:function(r,e,t,a){var i=r.getReferringComponents("xAxis",at).models[0],n=r.getReferringComponents("yAxis",at).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",n),ot(i)&&(a.set("x",i),e.firstCategoryDimIndex=0),ot(n)&&(a.set("y",n),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,a){var i=r.getReferringComponents("singleAxis",at).models[0];e.coordSysDims=["single"],t.set("single",i),ot(i)&&(a.set("single",i),e.firstCategoryDimIndex=0)},polar:function(r,e,t,a){var i=r.getReferringComponents("polar",at).models[0],n=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",n),t.set("angle",o),ot(n)&&(a.set("radius",n),e.firstCategoryDimIndex=0),ot(o)&&(a.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,a){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,a){var i=r.ecModel,n=i.getComponent("parallel",r.get("parallelIndex")),o=e.coordSysDims=n.dimensions.slice();R(n.parallelAxisIndex,function(s,u){var l=i.getComponent("parallelAxis",s),c=o[u];t.set(c,l),ot(l)&&(a.set(c,l),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=u))})}};function ot(r){return r.get("type")==="category"}function Vr(r,e){var t=r.get("coordinateSystem"),a=Oa.get(t),i;return e&&e.coordSysDims&&(i=z(e.coordSysDims,function(n){var o={name:n},s=e.axisMap.get(n);if(s){var u=s.get("type");o.type=Ra(u)}return o})),i||(i=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),i}function Gr(r,e,t){var a,i;return t&&R(r,function(n,o){var s=n.coordDim,u=t.categoryAxisMap.get(s);u&&(a==null&&(a=o),n.ordinalMeta=u.getOrdinalMeta(),e&&(n.createInvertedIndices=!0)),n.otherDims.itemName!=null&&(i=!0)}),!i&&a!=null&&(r[a].otherDims.itemName=0),a}function te(r,e,t){t=t||{};var a=e.getSourceManager(),i,n=!1;i=a.getSource(),n=i.sourceFormat===qe;var o=Rr(e),s=Vr(e,o),u=t.useEncodeDefaulter,l=tt(u)?u:u?Je(Ma,s,e):null,c={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!n},v=Ta(i,c),g=Gr(v.dimensions,t.createInvertedIndices,o),h=n?null:a.getSharedDataStore(v),f=Pa(e,{schema:v,store:h}),d=new Ea(v,e);d.setCalculationInfo(f);var b=g!=null&&zr(i)?function(p,m,S,A){return A===g?S:this.defaultDimValueGetter(p,m,S,A)}:null;return d.hasItemOption=!1,d.initData(n?i:h,null,b),d}function zr(r){if(r.sourceFormat===qe){var e=Br(r.data||[]);return!gt(Na(e))}}function Br(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}var Fr=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},r.prototype.getCoordSysModel=function(){},r}(),ft=Ke();function oa(r,e){var t=z(e,function(a){return r.scale.parse(a)});return r.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function Wr(r){var e=r.getLabelModel().get("customValues");if(e){var t=dt(r),a=r.scale.getExtent(),i=oa(r,e),n=Yt(i,function(o){return o>=a[0]&&o<=a[1]});return{labels:z(n,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:r.scale.getLabel(s),tickValue:o}})}}return r.type==="category"?Xr(r):$r(r)}function Hr(r,e){var t=r.getTickModel().get("customValues");if(t){var a=r.scale.getExtent(),i=oa(r,t);return{ticks:Yt(i,function(n){return n>=a[0]&&n<=a[1]})}}return r.type==="category"?Zr(r,e):{ticks:z(r.scale.getTicks(),function(n){return n.value})}}function Xr(r){var e=r.getLabelModel(),t=sa(r,e);return!e.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function sa(r,e){var t=la(r,"labels"),a=Qe(e),i=ua(t,a);if(i)return i;var n,o;return tt(a)?n=ha(r,a):(o=a==="auto"?Ur(r):a,n=va(r,o)),ca(t,a,{labels:n,labelCategoryInterval:o})}function Zr(r,e){var t=la(r,"ticks"),a=Qe(e),i=ua(t,a);if(i)return i;var n,o;if((!e.get("show")||r.scale.isBlank())&&(n=[]),tt(a))n=ha(r,a,!0);else if(a==="auto"){var s=sa(r,r.getLabelModel());o=s.labelCategoryInterval,n=z(s.labels,function(u){return u.tickValue})}else o=a,n=va(r,o,!0);return ca(t,a,{ticks:n,tickCategoryInterval:o})}function $r(r){var e=r.scale.getTicks(),t=dt(r);return{labels:z(e,function(a,i){return{level:a.level,formattedLabel:t(a,i),rawLabel:r.scale.getLabel(a),tickValue:a.value}})}}function la(r,e){return ft(r)[e]||(ft(r)[e]=[])}function ua(r,e){for(var t=0;t<r.length;t++)if(r[t].key===e)return r[t].value}function ca(r,e,t){return r.push({key:e,value:t}),t}function Ur(r){var e=ft(r).autoInterval;return e??(ft(r).autoInterval=r.calculateCategoryInterval())}function Yr(r){var e=jr(r),t=dt(r),a=(e.axisRotate-e.labelRotate)/180*Math.PI,i=r.scale,n=i.getExtent(),o=i.count();if(n[1]-n[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=n[0],l=r.dataToCoord(u+1)-r.dataToCoord(u),c=Math.abs(l*Math.cos(a)),v=Math.abs(l*Math.sin(a)),g=0,h=0;u<=n[1];u+=s){var f=0,d=0,b=Va(t({value:u}),e.font,"center","top");f=b.width*1.3,d=b.height*1.3,g=Math.max(g,f,7),h=Math.max(h,d,7)}var p=g/c,m=h/v;isNaN(p)&&(p=1/0),isNaN(m)&&(m=1/0);var S=Math.max(0,Math.floor(Math.min(p,m))),A=ft(r.model),_=r.getExtent(),D=A.lastAutoInterval,w=A.lastTickCount;return D!=null&&w!=null&&Math.abs(D-S)<=1&&Math.abs(w-o)<=1&&D>S&&A.axisExtent0===_[0]&&A.axisExtent1===_[1]?S=D:(A.lastTickCount=o,A.lastAutoInterval=S,A.axisExtent0=_[0],A.axisExtent1=_[1]),S}function jr(r){var e=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function va(r,e,t){var a=dt(r),i=r.scale,n=i.getExtent(),o=r.getLabelModel(),s=[],u=Math.max((e||0)+1,1),l=n[0],c=i.count();l!==0&&u>1&&c/u>2&&(l=Math.round(Math.ceil(l/u)*u));var v=Ga(r),g=o.get("showMinLabel")||v,h=o.get("showMaxLabel")||v;g&&l!==n[0]&&d(n[0]);for(var f=l;f<=n[1];f+=u)d(f);h&&f-u!==n[1]&&d(n[1]);function d(b){var p={value:b};s.push(t?b:{formattedLabel:a(p),rawLabel:i.getLabel(p),tickValue:b})}return s}function ha(r,e,t){var a=r.scale,i=dt(r),n=[];return R(a.getTicks(),function(o){var s=a.getLabel(o),u=o.value;e(o.value,s)&&n.push(t?u:{formattedLabel:i(o),rawLabel:s,tickValue:u})}),n}var we=[0,1],qr=function(){function r(e,t,a){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=a||[0,0]}return r.prototype.contain=function(e){var t=this._extent,a=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=a&&e<=i},r.prototype.containData=function(e){return this.scale.contain(e)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return za(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var a=this._extent;a[0]=e,a[1]=t},r.prototype.dataToCoord=function(e,t){var a=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(a=a.slice(),Ce(a,i.count())),ne(e,we,a,t)},r.prototype.coordToData=function(e,t){var a=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(a=a.slice(),Ce(a,i.count()));var n=ne(e,a,we,t);return this.scale.scale(n)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),a=Hr(this,t),i=a.ticks,n=z(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return Jr(this,n,o,e.clamp),n},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var a=this.scale.getMinorTicks(t),i=z(a,function(n){return z(n,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},r.prototype.getViewLabels=function(){return Wr(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),a=t[1]-t[0]+(this.onBand?1:0);a===0&&(a=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/a},r.prototype.calculateCategoryInterval=function(){return Yr(this)},r}();function Ce(r,e){var t=r[1]-r[0],a=e,i=t/a/2;r[0]+=i,r[1]-=i}function Jr(r,e,t,a){var i=e.length;if(!r.onBand||t||!i)return;var n=r.getExtent(),o,s;if(i===1)e[0].coord=n[0],o=e[1]={coord:n[1],tickValue:e[0].tickValue};else{var u=e[i-1].tickValue-e[0].tickValue,l=(e[i-1].coord-e[0].coord)/u;R(e,function(h){h.coord-=l/2});var c=r.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+l*s,tickValue:c[1]+1},e.push(o)}var v=n[0]>n[1];g(e[0].coord,n[0])&&(a?e[0].coord=n[0]:e.shift()),a&&g(n[0],e[0].coord)&&e.unshift({coord:n[0]}),g(n[1],o.coord)&&(a?o.coord=n[1]:e.pop()),a&&g(o.coord,n[1])&&e.push({coord:n[1]});function g(h,f){return h=Y(h),f=Y(f),v?h>f:h<f}}var Kr=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(jt),Ht=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",at).models[0]},e.type="cartesian2dAxis",e}(jt);Ba(Ht,Fr);var fa={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Qr=rt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},fa),ee=rt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},fa),ti=rt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},ee),ei=lt({logBase:10},ee);const ai={category:Qr,value:ee,time:ti,log:ei};var ri={value:1,category:1,time:1,log:1};function Le(r,e,t,a){R(ri,function(i,n){var o=rt(rt({},ai[n],!0),a,!0),s=function(u){N(l,u);function l(){var c=u!==null&&u.apply(this,arguments)||this;return c.type=e+"Axis."+n,c}return l.prototype.mergeDefaultAndTheme=function(c,v){var g=Fa(this),h=g?Wa(c):{},f=v.getTheme();rt(c,f.get(n+"Axis")),rt(c,this.getDefaultOption()),c.type=Ie(c),g&&Ha(c,h,g)},l.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=Xa.createByAxisModel(this))},l.prototype.getCategories=function(c){var v=this.option;if(v.type==="category")return c?v.data:this.__ordinalMeta.categories},l.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},l.type=e+"Axis."+n,l.defaultOption=o,l}(t);r.registerComponentModel(s)}),r.registerSubTypeDefaulter(e+"Axis",Ie)}function Ie(r){return r.type||(r.data?"category":"value")}var ii=function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return z(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Yt(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r}(),Xt=["x","y"];function ke(r){return r.type==="interval"||r.type==="time"}var ni=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=Xt,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!ke(t)||!ke(a))){var i=t.getExtent(),n=a.getExtent(),o=this.dataToPoint([i[0],n[0]]),s=this.dataToPoint([i[1],n[1]]),u=i[1]-i[0],l=n[1]-n[0];if(!(!u||!l)){var c=(s[0]-o[0])/u,v=(s[1]-o[1])/l,g=o[0]-i[0]*c,h=o[1]-n[0]*v,f=this._transform=[c,0,0,v,g,h];this._invTransform=Za([],f)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var a=this.getAxis("x"),i=this.getAxis("y");return a.contain(a.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,a){var i=this.dataToPoint(t),n=this.dataToPoint(a),o=this.getArea(),s=new oe(i[0],i[1],n[0]-i[0],n[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,a,i){i=i||[];var n=t[0],o=t[1];if(this._transform&&n!=null&&isFinite(n)&&o!=null&&isFinite(o))return se(i,t,this._transform);var s=this.getAxis("x"),u=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(n,a)),i[1]=u.toGlobalCoord(u.dataToCoord(o,a)),i},e.prototype.clampData=function(t,a){var i=this.getAxis("x").scale,n=this.getAxis("y").scale,o=i.getExtent(),s=n.getExtent(),u=i.parse(t[0]),l=n.parse(t[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),a[1]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),a},e.prototype.pointToData=function(t,a){var i=[];if(this._invTransform)return se(i,t,this._invTransform);var n=this.getAxis("x"),o=this.getAxis("y");return i[0]=n.coordToData(n.toLocalCoord(t[0]),a),i[1]=o.coordToData(o.toLocalCoord(t[1]),a),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var a=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),n=Math.min(a[0],a[1])-t,o=Math.min(i[0],i[1])-t,s=Math.max(a[0],a[1])-n+t,u=Math.max(i[0],i[1])-o+t;return new oe(n,o,s,u)},e}(ii),oi=function(r){N(e,r);function e(t,a,i,n,o){var s=r.call(this,t,a,i)||this;return s.index=0,s.type=n||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),t&&a[0]>a[1]&&a.reverse(),a},e.prototype.pointToData=function(t,a){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),a)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(qr),Tt=Math.log;function si(r,e,t){var a=$a.prototype,i=a.getTicks.call(t),n=a.getTicks.call(t,!0),o=i.length-1,s=a.getInterval.call(t),u=Ua(r,e),l=u.extent,c=u.fixMin,v=u.fixMax;if(r.type==="log"){var g=Tt(r.base);l=[Tt(l[0])/g,Tt(l[1])/g]}r.setExtent(l[0],l[1]),r.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:v});var h=a.getExtent.call(r);c&&(l[0]=h[0]),v&&(l[1]=h[1]);var f=a.getInterval.call(r),d=l[0],b=l[1];if(c&&v)f=(b-d)/o;else if(c)for(b=l[0]+f*o;b<l[1]&&isFinite(b)&&isFinite(l[1]);)f=It(f),b=l[0]+f*o;else if(v)for(d=l[1]-f*o;d>l[0]&&isFinite(d)&&isFinite(l[0]);)f=It(f),d=l[1]-f*o;else{var p=r.getTicks().length-1;p>o&&(f=It(f));var m=f*o;b=Math.ceil(l[1]/f)*f,d=Y(b-m),d<0&&l[0]>=0?(d=0,b=Y(m)):b>0&&l[1]<=0&&(b=0,d=-Y(m))}var S=(i[0].value-n[0].value)/s,A=(i[o].value-n[o].value)/s;a.setExtent.call(r,d+f*S,b+f*A),a.setInterval.call(r,f),(S||A)&&a.setNiceExtent.call(r,d+f,b-f)}var li=function(){function r(e,t,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Xt,this._initCartesian(e,t,a),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var a=this._axesMap;this._updateScale(e,this.model);function i(o){var s,u=Ja(o),l=u.length;if(l){for(var c=[],v=l-1;v>=0;v--){var g=+u[v],h=o[g],f=h.model,d=h.scale;Gt(d)&&f.get("alignTicks")&&f.get("interval")==null?c.push(h):(ce(d,f),Gt(d)&&(s=h))}c.length&&(s||(s=c.pop(),ce(s.scale,s.model)),R(c,function(b){si(b.scale,b.model,s.scale)}))}}i(a.x),i(a.y);var n={};R(a.x,function(o){Me(a,"y",o,n)}),R(a.y,function(o){Me(a,"x",o,n)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,a){var i=e.getBoxLayoutParams(),n=!a&&e.get("containLabel"),o=ta(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;u(),n&&(R(s,function(l){if(!l.model.get(["axisLabel","inside"])){var c=Ya(l);if(c){var v=l.isHorizontal()?"height":"width",g=l.model.get(["axisLabel","margin"]);o[v]-=c[v]+g,l.position==="top"?o.y+=c.height+g:l.position==="left"&&(o.x+=c.width+g)}}}),u()),R(this._coordsList,function(l){l.calcAffineTransform()});function u(){R(s,function(l){var c=l.isHorizontal(),v=c?[0,o.width]:[0,o.height],g=l.inverse?1:0;l.setExtent(v[g],v[1-g]),ui(l,c?o.x:o.y)})}},r.prototype.getAxis=function(e,t){var a=this._axesMap[e];if(a!=null)return a[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var a="x"+e+"y"+t;return this._coordsMap[a]}ea(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,n=this._coordsList;i<n.length;i++)if(n[i].getAxis("x").index===e||n[i].getAxis("y").index===t)return n[i]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,a){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(a):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(a)):null},r.prototype.convertFromPixel=function(e,t,a){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(a):i.axis?i.axis.coordToData(i.axis.toLocalCoord(a)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,a=e.xAxisModel||t&&t.getReferringComponents("xAxis",at).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",at).models[0],n=e.gridModel,o=this._coordsList,s,u;if(t)s=t.coordinateSystem,kt(o,s)<0&&(s=null);else if(a&&i)s=this.getCartesian(a.componentIndex,i.componentIndex);else if(a)u=this.getAxis("x",a.componentIndex);else if(i)u=this.getAxis("y",i.componentIndex);else if(n){var l=n.coordinateSystem;l===this&&(s=this._coordsList[0])}return{cartesian:s,axis:u}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,a){var i=this,n=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},u={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,R(s.x,function(c,v){R(s.y,function(g,h){var f="x"+v+"y"+h,d=new ni(f);d.master=i,d.model=e,i._coordsMap[f]=d,i._coordsList.push(d),d.addAxis(c),d.addAxis(g)})});function l(c){return function(v,g){if(Pt(v,e)){var h=v.get("position");c==="x"?h!=="top"&&h!=="bottom"&&(h=o.bottom?"top":"bottom"):h!=="left"&&h!=="right"&&(h=o.left?"right":"left"),o[h]=!0;var f=new oi(c,ja(v),[0,0],v.get("type"),h),d=f.type==="category";f.onBand=d&&v.get("boundaryGap"),f.inverse=v.get("inverse"),v.axis=f,f.model=v,f.grid=n,f.index=g,n._axesList.push(f),s[c][g]=f,u[c]++}}}},r.prototype._updateScale=function(e,t){R(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var n=i.model.get("categorySortInfo");i.scale.setSortInfo(n)}}),e.eachSeries(function(i){if(le(i)){var n=ue(i),o=n.xAxisModel,s=n.yAxisModel;if(!Pt(o,t)||!Pt(s,t))return;var u=this.getCartesian(o.componentIndex,s.componentIndex),l=i.getData(),c=u.getAxis("x"),v=u.getAxis("y");a(l,c),a(l,v)}},this);function a(i,n){R(qa(i,n.dim),function(o){n.scale.unionExtentFromData(i,o)})}},r.prototype.getTooltipAxes=function(e){var t=[],a=[];return R(this.getCartesians(),function(i){var n=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(n);kt(t,n)<0&&t.push(n),kt(a,o)<0&&a.push(o)}),{baseAxes:t,otherAxes:a}},r.create=function(e,t){var a=[];return e.eachComponent("grid",function(i,n){var o=new r(i,e,t);o.name="grid_"+n,o.resize(i,t,!0),i.coordinateSystem=o,a.push(o)}),e.eachSeries(function(i){if(le(i)){var n=ue(i),o=n.xAxisModel,s=n.yAxisModel,u=o.getCoordSysModel(),l=u.coordinateSystem;i.coordinateSystem=l.getCartesian(o.componentIndex,s.componentIndex)}}),a},r.dimensions=Xt,r}();function Pt(r,e){return r.getCoordSysModel()===e}function Me(r,e,t,a){t.getAxesOnZeroOf=function(){return n?[n]:[]};var i=r[e],n,o=t.model,s=o.get(["axisLine","onZero"]),u=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(u!=null)Te(i[u])&&(n=i[u]);else for(var l in i)if(i.hasOwnProperty(l)&&Te(i[l])&&!a[c(i[l])]){n=i[l];break}n&&(a[c(n)]=!0);function c(v){return v.dim+"_"+v.index}}function Te(r){return r&&r.type!=="category"&&r.type!=="time"&&Ka(r)}function ui(r,e){var t=r.getExtent(),a=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(i){return i+e}:function(i){return a-i+e},r.toLocalCoord=r.dim==="x"?function(i){return i-e}:function(i){return a-i+e}}var Zt=Ke();function ci(r,e,t,a){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel("splitArea"),o=n.getModel("areaStyle"),s=o.get("color"),u=a.coordinateSystem.getRect(),l=i.getTicksCoords({tickModel:n,clamp:!0});if(l.length){var c=s.length,v=Zt(r).splitAreaColors,g=Vt(),h=0;if(v)for(var f=0;f<l.length;f++){var d=v.get(l[f].tickValue);if(d!=null){h=(d+(c-1)*f)%c;break}}var b=i.toGlobalCoord(l[0].coord),p=o.getAreaStyle();s=gt(s)?s:[s];for(var f=1;f<l.length;f++){var m=i.toGlobalCoord(l[f].coord),S=void 0,A=void 0,_=void 0,D=void 0;i.isHorizontal()?(S=b,A=u.y,_=m-S,D=u.height,b=S+_):(S=u.x,A=b,_=u.width,D=m-A,b=A+D);var w=l[f-1].tickValue;w!=null&&g.set(w,h),e.add(new ut({anid:w!=null?"area_"+w:null,shape:{x:S,y:A,width:_,height:D},style:lt({fill:s[h]},p),autoBatch:!0,silent:!0})),h=(h+1)%c}Zt(r).splitAreaColors=g}}}function vi(r){Zt(r).splitAreaColors=null}var hi=["axisLine","axisTickLabel","axisName"],fi=["splitArea","splitLine","minorSplitLine"],ga=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,a,i,n){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ct,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),u=Qa(s,t),l=new tr(t,ht({handleAutoShown:function(v){for(var g=s.coordinateSystem.getCartesians(),h=0;h<g.length;h++)if(Gt(g[h].getOtherAxis(t.axis).scale))return!0;return!1}},u));R(hi,l.add,l),this._axisGroup.add(l.getGroup()),R(fi,function(v){t.get([v,"show"])&&gi[v](this,this._axisGroup,t,s)},this);var c=n&&n.type==="changeAxisOrder"&&n.isInitSort;c||er(o,this._axisGroup,t),r.prototype.render.call(this,t,a,i,n)}},e.prototype.remove=function(){vi(this)},e.type="cartesianAxis",e}(ar),gi={splitLine:function(r,e,t,a){var i=t.axis;if(!i.scale.isBlank()){var n=t.getModel("splitLine"),o=n.getModel("lineStyle"),s=o.get("color"),u=n.get("showMinLine")!==!1,l=n.get("showMaxLine")!==!1;s=gt(s)?s:[s];for(var c=a.coordinateSystem.getRect(),v=i.isHorizontal(),g=0,h=i.getTicksCoords({tickModel:n}),f=[],d=[],b=o.getLineStyle(),p=0;p<h.length;p++){var m=i.toGlobalCoord(h[p].coord);if(!(p===0&&!u||p===h.length-1&&!l)){var S=h[p].tickValue;v?(f[0]=m,f[1]=c.y,d[0]=m,d[1]=c.y+c.height):(f[0]=c.x,f[1]=m,d[0]=c.x+c.width,d[1]=m);var A=g++%s.length,_=new ve({anid:S!=null?"line_"+S:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:lt({stroke:s[A]},b),silent:!0});he(_.shape,b.lineWidth),e.add(_)}}}},minorSplitLine:function(r,e,t,a){var i=t.axis,n=t.getModel("minorSplitLine"),o=n.getModel("lineStyle"),s=a.coordinateSystem.getRect(),u=i.isHorizontal(),l=i.getMinorTicksCoords();if(l.length)for(var c=[],v=[],g=o.getLineStyle(),h=0;h<l.length;h++)for(var f=0;f<l[h].length;f++){var d=i.toGlobalCoord(l[h][f].coord);u?(c[0]=d,c[1]=s.y,v[0]=d,v[1]=s.y+s.height):(c[0]=s.x,c[1]=d,v[0]=s.x+s.width,v[1]=d);var b=new ve({anid:"minor_line_"+l[h][f].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:v[0],y2:v[1]},style:g,silent:!0});he(b.shape,g.lineWidth),e.add(b)}},splitArea:function(r,e,t,a){ci(r,e,t,a)}},da=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(ga),di=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=da.type,t}return e.type="yAxis",e}(ga),pi=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,a){this.group.removeAll(),t.get("show")&&this.group.add(new ut({shape:t.coordinateSystem.getRect(),style:lt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(aa),Pe={offset:0};function mi(r){r.registerComponentView(pi),r.registerComponentModel(Kr),r.registerCoordinateSystem("cartesian2d",li),Le(r,"x",Ht,Pe),Le(r,"y",Ht,Pe),r.registerComponentView(da),r.registerComponentView(di),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function yi(r){zt(mi),zt(rr)}var bi=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(jt),Si=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,i){if(this.group.removeAll(),!!t.get("show")){var n=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),u=t.get("textAlign"),l=ir(t.get("textBaseline"),t.get("textVerticalAlign")),c=new Bt({style:fe(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),v=c.getBoundingRect(),g=t.get("subtext"),h=new Bt({style:fe(s,{text:g,fill:s.getTextColor(),y:v.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),f=t.get("link"),d=t.get("sublink"),b=t.get("triggerEvent",!0);c.silent=!f&&!b,h.silent=!d&&!b,f&&c.on("click",function(){ge(f,"_"+t.get("target"))}),d&&h.on("click",function(){ge(d,"_"+t.get("subtarget"))}),j(c).eventData=j(h).eventData=b?{componentType:"title",componentIndex:t.componentIndex}:null,n.add(c),g&&n.add(h);var p=n.getBoundingRect(),m=t.getBoxLayoutParams();m.width=p.width,m.height=p.height;var S=ta(m,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));u||(u=t.get("left")||t.get("right"),u==="middle"&&(u="center"),u==="right"?S.x+=S.width:u==="center"&&(S.x+=S.width/2)),l||(l=t.get("top")||t.get("bottom"),l==="center"&&(l="middle"),l==="bottom"?S.y+=S.height:l==="middle"&&(S.y+=S.height/2),l=l||"top"),n.x=S.x,n.y=S.y,n.markRedraw();var A={align:u,verticalAlign:l};c.setStyle(A),h.setStyle(A),p=n.getBoundingRect();var _=S.margin,D=t.getItemStyle(["color","opacity"]);D.fill=t.get("backgroundColor");var w=new ut({shape:{x:p.x-_[3],y:p.y-_[0],width:p.width+_[1]+_[3],height:p.height+_[0]+_[2],r:t.get("borderRadius")},style:D,subPixelOptimize:!0,silent:!0});n.add(w)}},e.type="title",e}(aa);function xi(r){r.registerComponentModel(bi),r.registerComponentView(Si)}function ae(r,e){var t=r.mapDimensionsAll("defaultedLabel"),a=t.length;if(a===1){var i=de(r,e,t[0]);return i!=null?i+"":null}else if(a){for(var n=[],o=0;o<t.length;o++)n.push(de(r,e,t[o]));return n.join(" ")}}function pa(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!gt(e))return e+"";for(var a=[],i=0;i<t.length;i++){var n=r.getDimensionIndex(t[i]);n>=0&&a.push(e[n])}return a.join(" ")}var re=function(r){N(e,r);function e(t,a,i,n){var o=r.call(this)||this;return o.updateData(t,a,i,n),o}return e.prototype._createSymbol=function(t,a,i,n,o){this.removeAll();var s=Ft(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),s.drift=Ai,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){nr(this.childAt(0))},e.prototype.downplay=function(){or(this.childAt(0))},e.prototype.setZ=function(t,a){var i=this.childAt(0);i.zlevel=t,i.z=a},e.prototype.setDraggable=function(t,a){var i=this.childAt(0);i.draggable=t,i.cursor=!a&&t?"move":i.cursor},e.prototype.updateData=function(t,a,i,n){this.silent=!1;var o=t.getItemVisual(a,"symbol")||"circle",s=t.hostModel,u=e.getSymbolSize(t,a),l=o!==this._symbolType,c=n&&n.disableAnimation;if(l){var v=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,t,a,u,v)}else{var g=this.childAt(0);g.silent=!1;var h={scaleX:u[0]/2,scaleY:u[1]/2};c?g.attr(h):q(g,h,s,a),ra(g)}if(this._updateCommon(t,a,u,i,n),l){var g=this.childAt(0);if(!c){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,et(g,h,s,a)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,a,i,n,o){var s=this.childAt(0),u=t.hostModel,l,c,v,g,h,f,d,b,p;if(n&&(l=n.emphasisItemStyle,c=n.blurItemStyle,v=n.selectItemStyle,g=n.focus,h=n.blurScope,d=n.labelStatesModels,b=n.hoverScale,p=n.cursorStyle,f=n.emphasisDisabled),!n||t.hasItemOption){var m=n&&n.itemModel?n.itemModel:t.getItemModel(a),S=m.getModel("emphasis");l=S.getModel("itemStyle").getItemStyle(),v=m.getModel(["select","itemStyle"]).getItemStyle(),c=m.getModel(["blur","itemStyle"]).getItemStyle(),g=S.get("focus"),h=S.get("blurScope"),f=S.get("disabled"),d=wt(m),b=S.getShallow("scale"),p=m.getShallow("cursor")}var A=t.getItemVisual(a,"symbolRotate");s.attr("rotation",(A||0)*Math.PI/180||0);var _=sr(t.getItemVisual(a,"symbolOffset"),i);_&&(s.x=_[0],s.y=_[1]),p&&s.attr("cursor",p);var D=t.getItemVisual(a,"style"),w=D.fill;if(s instanceof lr){var T=s.style;s.useStyle(ht({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},D))}else s.__isEmptyBrush?s.useStyle(ht({},D)):s.useStyle(D),s.style.decal=null,s.setColor(w,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var P=t.getItemVisual(a,"liftZ"),C=this._z2;P!=null?C==null&&(this._z2=s.z2,s.z2+=P):C!=null&&(s.z2=C,this._z2=null);var y=o&&o.useNameLabel;qt(s,d,{labelFetcher:u,labelDataIndex:a,defaultText:x,inheritColor:w,defaultOpacity:D.opacity});function x(I){return y?t.getName(I):ae(t,I)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var L=s.ensureState("emphasis");L.style=l,s.ensureState("select").style=v,s.ensureState("blur").style=c;var k=b==null||b===!0?Math.max(1.1,3/this._sizeY):isFinite(b)&&b>0?+b:1;L.scaleX=this._sizeX*k,L.scaleY=this._sizeY*k,this.setSymbolScale(1),_t(this,g,h,f)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,a,i){var n=this.childAt(0),o=j(this).dataIndex,s=i&&i.animation;if(this.silent=n.silent=!0,i&&i.fadeLabel){var u=n.getTextContent();u&&pe(u,{style:{opacity:0}},a,{dataIndex:o,removeOpt:s,cb:function(){n.removeTextContent()}})}else n.removeTextContent();pe(n,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,a){return ur(t.getItemVisual(a,"symbolSize"))},e}(ct);function Ai(r,e){this.parent.drift(r,e)}function Et(r,e,t,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function Ee(r){return r!=null&&!ea(r)&&(r={isIgnore:r}),r||{}}function Oe(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:wt(e),cursorStyle:e.get("cursor")}}var _i=function(){function r(e){this.group=new ct,this._SymbolCtor=e||re}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=Ee(t);var a=this.group,i=e.hostModel,n=this._data,o=this._SymbolCtor,s=t.disableAnimation,u=Oe(e),l={disableAnimation:s},c=t.getSymbolPoint||function(v){return e.getItemLayout(v)};n||a.removeAll(),e.diff(n).add(function(v){var g=c(v);if(Et(e,g,v,t)){var h=new o(e,v,u,l);h.setPosition(g),e.setItemGraphicEl(v,h),a.add(h)}}).update(function(v,g){var h=n.getItemGraphicEl(g),f=c(v);if(!Et(e,f,v,t)){a.remove(h);return}var d=e.getItemVisual(v,"symbol")||"circle",b=h&&h.getSymbolType&&h.getSymbolType();if(!h||b&&b!==d)a.remove(h),h=new o(e,v,u,l),h.setPosition(f);else{h.updateData(e,v,u,l);var p={x:f[0],y:f[1]};s?h.attr(p):q(h,p,i)}a.add(h),e.setItemGraphicEl(v,h)}).remove(function(v){var g=n.getItemGraphicEl(v);g&&g.fadeOut(function(){a.remove(g)},i)}).execute(),this._getSymbolPoint=c,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(a,i){var n=e._getSymbolPoint(i);a.setPosition(n),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Oe(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,a){this._progressiveEls=[],a=Ee(a);function i(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var o=t.getItemLayout(n);if(Et(t,o,n,a)){var s=new this._SymbolCtor(t,n,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},r.prototype.eachRendered=function(e){ia(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},a.hostModel)}):t.removeAll()},r}();function ie(r,e){return r.type===e}var Di=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return te(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var a=new ct,i=Ft("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(i),i.setStyle(t.lineStyle);var n=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=n==="none"?"circle":n,u=t.itemHeight*.8,l=Ft(s,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);a.add(l),l.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return l.rotation=c*Math.PI/180,l.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),a},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Jt);function ma(r,e,t){var a=r.getBaseAxis(),i=r.getOtherAxis(a),n=wi(i,t),o=a.dim,s=i.dim,u=e.mapDimension(s),l=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,v=z(r.dimensions,function(f){return e.mapDimension(f)}),g=!1,h=e.getCalculationInfo("stackResultDimension");return Dt(e,v[0])&&(g=!0,v[0]=h),Dt(e,v[1])&&(g=!0,v[1]=h),{dataDimsForPoint:v,valueStart:n,valueAxisDim:s,baseAxisDim:o,stacked:!!g,valueDim:u,baseDim:l,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function wi(r,e){var t=0,a=r.scale.getExtent();return e==="start"?t=a[0]:e==="end"?t=a[1]:Kt(e)&&!isNaN(e)?t=e:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}function ya(r,e,t,a){var i=NaN;r.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(i)&&(i=r.valueStart);var n=r.baseDataOffset,o=[];return o[n]=t.get(r.baseDim,a),o[1-n]=i,e.dataToPoint(o)}function Ci(r,e){var t=[];return e.diff(r).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,i){t.push({cmd:"=",idx:i,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}function Li(r,e,t,a,i,n,o,s){for(var u=Ci(r,e),l=[],c=[],v=[],g=[],h=[],f=[],d=[],b=ma(i,e,o),p=r.getLayout("points")||[],m=e.getLayout("points")||[],S=0;S<u.length;S++){var A=u[S],_=!0,D=void 0,w=void 0;switch(A.cmd){case"=":D=A.idx*2,w=A.idx1*2;var T=p[D],P=p[D+1],C=m[w],y=m[w+1];(isNaN(T)||isNaN(P))&&(T=C,P=y),l.push(T,P),c.push(C,y),v.push(t[D],t[D+1]),g.push(a[w],a[w+1]),d.push(e.getRawIndex(A.idx1));break;case"+":var x=A.idx,L=b.dataDimsForPoint,k=i.dataToPoint([e.get(L[0],x),e.get(L[1],x)]);w=x*2,l.push(k[0],k[1]),c.push(m[w],m[w+1]);var I=ya(b,i,e,x);v.push(I[0],I[1]),g.push(a[w],a[w+1]),d.push(e.getRawIndex(x));break;case"-":_=!1}_&&(h.push(A),f.push(f.length))}f.sort(function(B,Lt){return d[B]-d[Lt]});for(var O=l.length,G=st(O),E=st(O),V=st(O),F=st(O),W=[],S=0;S<f.length;S++){var vt=f[S],$=S*2,U=vt*2;G[$]=l[U],G[$+1]=l[U+1],E[$]=c[U],E[$+1]=c[U+1],V[$]=v[U],V[$+1]=v[U+1],F[$]=g[U],F[$+1]=g[U+1],W[S]=h[vt]}return{current:G,next:E,stackedOnCurrent:V,stackedOnNext:F,status:W}}var J=Math.min,K=Math.max;function it(r,e){return isNaN(r)||isNaN(e)}function $t(r,e,t,a,i,n,o,s,u){for(var l,c,v,g,h,f,d=t,b=0;b<a;b++){var p=e[d*2],m=e[d*2+1];if(d>=i||d<0)break;if(it(p,m)){if(u){d+=n;continue}break}if(d===t)r[n>0?"moveTo":"lineTo"](p,m),v=p,g=m;else{var S=p-l,A=m-c;if(S*S+A*A<.5){d+=n;continue}if(o>0){for(var _=d+n,D=e[_*2],w=e[_*2+1];D===p&&w===m&&b<a;)b++,_+=n,d+=n,D=e[_*2],w=e[_*2+1],p=e[d*2],m=e[d*2+1],S=p-l,A=m-c;var T=b+1;if(u)for(;it(D,w)&&T<a;)T++,_+=n,D=e[_*2],w=e[_*2+1];var P=.5,C=0,y=0,x=void 0,L=void 0;if(T>=a||it(D,w))h=p,f=m;else{C=D-l,y=w-c;var k=p-l,I=D-p,O=m-c,G=w-m,E=void 0,V=void 0;if(s==="x"){E=Math.abs(k),V=Math.abs(I);var F=C>0?1:-1;h=p-F*E*o,f=m,x=p+F*V*o,L=m}else if(s==="y"){E=Math.abs(O),V=Math.abs(G);var W=y>0?1:-1;h=p,f=m-W*E*o,x=p,L=m+W*V*o}else E=Math.sqrt(k*k+O*O),V=Math.sqrt(I*I+G*G),P=V/(V+E),h=p-C*o*(1-P),f=m-y*o*(1-P),x=p+C*o*P,L=m+y*o*P,x=J(x,K(D,p)),L=J(L,K(w,m)),x=K(x,J(D,p)),L=K(L,J(w,m)),C=x-p,y=L-m,h=p-C*E/V,f=m-y*E/V,h=J(h,K(l,p)),f=J(f,K(c,m)),h=K(h,J(l,p)),f=K(f,J(c,m)),C=p-h,y=m-f,x=p+C*V/E,L=m+y*V/E}r.bezierCurveTo(v,g,h,f,p,m),v=x,g=L}else r.lineTo(p,m)}l=p,c=m,d+=n}return b}var ba=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),Ii=function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polyline",a}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ba},e.prototype.buildPath=function(t,a){var i=a.points,n=0,o=i.length/2;if(a.connectNulls){for(;o>0&&it(i[o*2-2],i[o*2-1]);o--);for(;n<o&&it(i[n*2],i[n*2+1]);n++);}for(;n<o;)n+=$t(t,i,n,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},e.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,n=i.data,o=cr.CMD,s,u,l=a==="x",c=[],v=0;v<n.length;){var g=n[v++],h=void 0,f=void 0,d=void 0,b=void 0,p=void 0,m=void 0,S=void 0;switch(g){case o.M:s=n[v++],u=n[v++];break;case o.L:if(h=n[v++],f=n[v++],S=l?(t-s)/(h-s):(t-u)/(f-u),S<=1&&S>=0){var A=l?(f-u)*S+u:(h-s)*S+s;return l?[t,A]:[A,t]}s=h,u=f;break;case o.C:h=n[v++],f=n[v++],d=n[v++],b=n[v++],p=n[v++],m=n[v++];var _=l?me(s,h,d,p,t,c):me(u,f,b,m,t,c);if(_>0)for(var D=0;D<_;D++){var w=c[D];if(w<=1&&w>=0){var A=l?ye(u,f,b,m,w):ye(s,h,d,p,w);return l?[t,A]:[A,t]}}s=p,u=m;break}}},e}(Ct),ki=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(ba),Mi=function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="ec-polygon",a}return e.prototype.getDefaultShape=function(){return new ki},e.prototype.buildPath=function(t,a){var i=a.points,n=a.stackedOnPoints,o=0,s=i.length/2,u=a.smoothMonotone;if(a.connectNulls){for(;s>0&&it(i[s*2-2],i[s*2-1]);s--);for(;o<s&&it(i[o*2],i[o*2+1]);o++);}for(;o<s;){var l=$t(t,i,o,s,s,1,a.smooth,u,a.connectNulls);$t(t,n,o+l-1,l,s,-1,a.stackedOnSmooth,u,a.connectNulls),o+=l+1,t.closePath()}},e}(Ct);function Sa(r,e,t,a,i){var n=r.getArea(),o=n.x,s=n.y,u=n.width,l=n.height,c=t.get(["lineStyle","width"])||0;o-=c/2,s-=c/2,u+=c,l+=c,u=Math.ceil(u),o!==Math.floor(o)&&(o=Math.floor(o),u++);var v=new ut({shape:{x:o,y:s,width:u,height:l}});if(e){var g=r.getBaseAxis(),h=g.isHorizontal(),f=g.inverse;h?(f&&(v.shape.x+=u),v.shape.width=0):(f||(v.shape.y+=l),v.shape.height=0);var d=tt(i)?function(b){i(b,v)}:null;et(v,{shape:{width:u,height:l,x:o,y:s}},t,null,a,d)}return v}function xa(r,e,t){var a=r.getArea(),i=Y(a.r0,1),n=Y(a.r,1),o=new Qt({shape:{cx:Y(r.cx,1),cy:Y(r.cy,1),r0:i,r:n,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){var s=r.getBaseAxis().dim==="angle";s?o.shape.endAngle=a.startAngle:o.shape.r=i,et(o,{shape:{endAngle:a.endAngle,r:n}},t)}return o}function Ti(r,e,t,a,i){if(r){if(r.type==="polar")return xa(r,e,t);if(r.type==="cartesian2d")return Sa(r,e,t,a,i)}else return null;return null}function Re(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function Ne(r){for(var e=1/0,t=1/0,a=-1/0,i=-1/0,n=0;n<r.length;){var o=r[n++],s=r[n++];isNaN(o)||(e=Math.min(o,e),a=Math.max(o,a)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[a,i]]}function Ve(r,e){var t=Ne(r),a=t[0],i=t[1],n=Ne(e),o=n[0],s=n[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function Ge(r){return Kt(r)?r:r?.5:0}function Pi(r,e,t){if(!t.valueDim)return[];for(var a=e.count(),i=st(a*2),n=0;n<a;n++){var o=ya(t,r,e,n);i[n*2]=o[0],i[n*2+1]=o[1]}return i}function Q(r,e,t,a,i){var n=t.getBaseAxis(),o=n.dim==="x"||n.dim==="radius"?0:1,s=[],u=0,l=[],c=[],v=[],g=[];if(i){for(u=0;u<r.length;u+=2){var h=e||r;!isNaN(h[u])&&!isNaN(h[u+1])&&g.push(r[u],r[u+1])}r=g}for(u=0;u<r.length-2;u+=2)switch(v[0]=r[u+2],v[1]=r[u+3],c[0]=r[u],c[1]=r[u+1],s.push(c[0],c[1]),a){case"end":l[o]=v[o],l[1-o]=c[1-o],s.push(l[0],l[1]);break;case"middle":var f=(c[o]+v[o])/2,d=[];l[o]=d[o]=f,l[1-o]=c[1-o],d[1-o]=v[1-o],s.push(l[0],l[1]),s.push(d[0],d[1]);break;default:l[o]=c[o],l[1-o]=v[1-o],s.push(l[0],l[1])}return s.push(r[u++],r[u++]),s}function Ei(r,e){var t=[],a=r.length,i,n;function o(c,v,g){var h=c.coord,f=(g-h)/(v.coord-h),d=gr(f,[c.color,v.color]);return{coord:g,color:d}}for(var s=0;s<a;s++){var u=r[s],l=u.coord;if(l<0)i=u;else if(l>e){n?t.push(o(n,u,e)):i&&t.push(o(i,u,0),o(i,u,e));break}else i&&(t.push(o(i,u,0)),i=null),t.push(u),n=u}return t}function Oi(r,e,t){var a=r.getVisual("visualMeta");if(!(!a||!a.length||!r.count())&&e.type==="cartesian2d"){for(var i,n,o=a.length-1;o>=0;o--){var s=r.getDimensionInfo(a[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){n=a[o];break}}if(n){var u=e.getAxis(i),l=z(n.stops,function(S){return{coord:u.toGlobalCoord(u.dataToCoord(S.value)),color:S.color}}),c=l.length,v=n.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),v.reverse());var g=Ei(l,i==="x"?t.getWidth():t.getHeight()),h=g.length;if(!h&&c)return l[0].coord<0?v[1]?v[1]:l[c-1].color:v[0]?v[0]:l[0].color;var f=10,d=g[0].coord-f,b=g[h-1].coord+f,p=b-d;if(p<.001)return"transparent";R(g,function(S){S.offset=(S.coord-d)/p}),g.push({offset:h?g[h-1].offset:.5,color:v[1]||"transparent"}),g.unshift({offset:h?g[0].offset:.5,color:v[0]||"transparent"});var m=new fr(0,0,0,0,g,!0);return m[i]=d,m[i+"2"]=b,m}}}function Ri(r,e,t){var a=r.get("showAllSymbol"),i=a==="auto";if(!(a&&!i)){var n=t.getAxesByScale("ordinal")[0];if(n&&!(i&&Ni(n,e))){var o=e.mapDimension(n.dim),s={};return R(n.getViewLabels(),function(u){var l=n.scale.getRawOrdinalNumber(u.tickValue);s[l]=1}),function(u){return!s.hasOwnProperty(e.get(o,u))}}}}function Ni(r,e){var t=r.getExtent(),a=Math.abs(t[1]-t[0])/r.scale.count();isNaN(a)&&(a=0);for(var i=e.count(),n=Math.max(1,Math.round(i/5)),o=0;o<i;o+=n)if(re.getSymbolSize(e,o)[r.isHorizontal()?1:0]*1.5>a)return!1;return!0}function Vi(r,e){return isNaN(r)||isNaN(e)}function Gi(r){for(var e=r.length/2;e>0&&Vi(r[e*2-2],r[e*2-1]);e--);return e-1}function ze(r,e){return[r[e*2],r[e*2+1]]}function zi(r,e,t){for(var a=r.length/2,i=t==="x"?0:1,n,o,s=0,u=-1,l=0;l<a;l++)if(o=r[l*2+i],!(isNaN(o)||isNaN(r[l*2+1-i]))){if(l===0){n=o;continue}if(n<=e&&o>=e||n>=e&&o<=e){u=l;break}s=l,n=o}return{range:[s,u],t:(e-n)/(o-n)}}function Aa(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<Ae.length;e++)if(r.get([Ae[e],"endLabel","show"]))return!0;return!1}function Ot(r,e,t,a){if(ie(e,"cartesian2d")){var i=a.getModel("endLabel"),n=i.get("valueAnimation"),o=a.getData(),s={lastFrameIndex:0},u=Aa(a)?function(h,f){r._endLabelOnDuring(h,f,o,s,n,i,e)}:null,l=e.getBaseAxis().isHorizontal(),c=Sa(e,t,a,function(){var h=r._endLabel;h&&t&&s.originalX!=null&&h.attr({x:s.originalX,y:s.originalY})},u);if(!a.get("clip",!0)){var v=c.shape,g=Math.max(v.width,v.height);l?(v.y-=g,v.height+=g*2):(v.x-=g,v.width+=g*2)}return u&&u(1,c),c}else return xa(e,t,a)}function Bi(r,e){var t=e.getBaseAxis(),a=t.isHorizontal(),i=t.inverse,n=a?i?"right":"left":"center",o=a?"middle":i?"top":"bottom";return{normal:{align:r.get("align")||n,verticalAlign:r.get("verticalAlign")||o}}}var Fi=function(r){N(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new ct,a=new _i;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t,this._changePolyState=vr(this._changePolyState,this)},e.prototype.render=function(t,a,i){var n=t.coordinateSystem,o=this.group,s=t.getData(),u=t.getModel("lineStyle"),l=t.getModel("areaStyle"),c=s.getLayout("points")||[],v=n.type==="polar",g=this._coordSys,h=this._symbolDraw,f=this._polyline,d=this._polygon,b=this._lineGroup,p=!a.ssr&&t.get("animation"),m=!l.isEmpty(),S=l.get("origin"),A=ma(n,s,S),_=m&&Pi(n,s,A),D=t.get("showSymbol"),w=t.get("connectNulls"),T=D&&!v&&Ri(t,s,n),P=this._data;P&&P.eachItemGraphicEl(function(B,Lt){B.__temp&&(o.remove(B),P.setItemGraphicEl(Lt,null))}),D||h.remove(),o.add(b);var C=v?!1:t.get("step"),y;n&&n.getArea&&t.get("clip",!0)&&(y=n.getArea(),y.width!=null?(y.x-=.1,y.y-=.1,y.width+=.2,y.height+=.2):y.r0&&(y.r0-=.5,y.r+=.5)),this._clipShapeForSymbol=y;var x=Oi(s,n,i)||s.getVisual("style")[s.getVisual("drawType")];if(!(f&&g.type===n.type&&C===this._step))D&&h.updateData(s,{isIgnore:T,clipShape:y,disableAnimation:!0,getSymbolPoint:function(B){return[c[B*2],c[B*2+1]]}}),p&&this._initSymbolLabelAnimation(s,n,y),C&&(_&&(_=Q(_,c,n,C,w)),c=Q(c,null,n,C,w)),f=this._newPolyline(c),m?d=this._newPolygon(c,_):d&&(b.remove(d),d=this._polygon=null),v||this._initOrUpdateEndLabel(t,n,be(x)),b.setClipPath(Ot(this,n,!0,t));else{m&&!d?d=this._newPolygon(c,_):d&&!m&&(b.remove(d),d=this._polygon=null),v||this._initOrUpdateEndLabel(t,n,be(x));var L=b.getClipPath();if(L){var k=Ot(this,n,!1,t);et(L,{shape:k.shape},t)}else b.setClipPath(Ot(this,n,!0,t));D&&h.updateData(s,{isIgnore:T,clipShape:y,disableAnimation:!0,getSymbolPoint:function(B){return[c[B*2],c[B*2+1]]}}),(!Re(this._stackedOnPoints,_)||!Re(this._points,c))&&(p?this._doUpdateAnimation(s,_,n,i,C,S,w):(C&&(_&&(_=Q(_,c,n,C,w)),c=Q(c,null,n,C,w)),f.setShape({points:c}),d&&d.setShape({points:c,stackedOnPoints:_})))}var I=t.getModel("emphasis"),O=I.get("focus"),G=I.get("blurScope"),E=I.get("disabled");if(f.useStyle(lt(u.getLineStyle(),{fill:"none",stroke:x,lineJoin:"bevel"})),Wt(f,t,"lineStyle"),f.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var V=f.getState("emphasis").style;V.lineWidth=+f.style.lineWidth+1}j(f).seriesIndex=t.seriesIndex,_t(f,O,G,E);var F=Ge(t.get("smooth")),W=t.get("smoothMonotone");if(f.setShape({smooth:F,smoothMonotone:W,connectNulls:w}),d){var vt=s.getCalculationInfo("stackedOnSeries"),$=0;d.useStyle(lt(l.getAreaStyle(),{fill:x,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),vt&&($=Ge(vt.get("smooth"))),d.setShape({smooth:F,stackedOnSmooth:$,smoothMonotone:W,connectNulls:w}),Wt(d,t,"areaStyle"),j(d).seriesIndex=t.seriesIndex,_t(d,O,G,E)}var U=this._changePolyState;s.eachItemGraphicEl(function(B){B&&(B.onHoverStateChange=U)}),this._polyline.onHoverStateChange=U,this._data=s,this._coordSys=n,this._stackedOnPoints=_,this._points=c,this._step=C,this._valueOrigin=S,t.get("triggerLineEvent")&&(this.packEventData(t,f),d&&this.packEventData(t,d))},e.prototype.packEventData=function(t,a){j(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,a,i,n){var o=t.getData(),s=Se(o,n);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var u=o.getLayout("points"),l=o.getItemGraphicEl(s);if(!l){var c=u[s*2],v=u[s*2+1];if(isNaN(c)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,v))return;var g=t.get("zlevel")||0,h=t.get("z")||0;l=new re(o,s),l.x=c,l.y=v,l.setZ(g,h);var f=l.getSymbolPath().getTextContent();f&&(f.zlevel=g,f.z=h,f.z2=this._polyline.z2+1),l.__temp=!0,o.setItemGraphicEl(s,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else At.prototype.highlight.call(this,t,a,i,n)},e.prototype.downplay=function(t,a,i,n){var o=t.getData(),s=Se(o,n);if(this._changePolyState("normal"),s!=null&&s>=0){var u=o.getItemGraphicEl(s);u&&(u.__temp?(o.setItemGraphicEl(s,null),this.group.remove(u)):u.downplay())}else At.prototype.downplay.call(this,t,a,i,n)},e.prototype._changePolyState=function(t){var a=this._polygon;xe(this._polyline,t),a&&xe(a,t)},e.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new Ii({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},e.prototype._newPolygon=function(t,a){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Mi({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,a,i){var n,o,s=a.getBaseAxis(),u=s.inverse;a.type==="cartesian2d"?(n=s.isHorizontal(),o=!1):a.type==="polar"&&(n=s.dim==="angle",o=!0);var l=t.hostModel,c=l.get("animationDuration");tt(c)&&(c=c(null));var v=l.get("animationDelay")||0,g=tt(v)?v(null):v;t.eachItemGraphicEl(function(h,f){var d=h;if(d){var b=[h.x,h.y],p=void 0,m=void 0,S=void 0;if(i)if(o){var A=i,_=a.pointToCoord(b);n?(p=A.startAngle,m=A.endAngle,S=-_[1]/180*Math.PI):(p=A.r0,m=A.r,S=_[0])}else{var D=i;n?(p=D.x,m=D.x+D.width,S=h.x):(p=D.y+D.height,m=D.y,S=h.y)}var w=m===p?0:(S-p)/(m-p);u&&(w=1-w);var T=tt(v)?v(f):c*w+g,P=d.getSymbolPath(),C=P.getTextContent();d.attr({scaleX:0,scaleY:0}),d.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:T}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:T}),P.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,a,i){var n=t.getModel("endLabel");if(Aa(t)){var o=t.getData(),s=this._polyline,u=o.getLayout("points");if(!u){s.removeTextContent(),this._endLabel=null;return}var l=this._endLabel;l||(l=this._endLabel=new Bt({z2:200}),l.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Gi(u);c>=0&&(qt(s,wt(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(v,g,h){return h!=null?pa(o,h):ae(o,v)},enableTextSetter:!0},Bi(n,a)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,a,i,n,o,s,u){var l=this._endLabel,c=this._polyline;if(l){t<1&&n.originalX==null&&(n.originalX=l.x,n.originalY=l.y);var v=i.getLayout("points"),g=i.hostModel,h=g.get("connectNulls"),f=s.get("precision"),d=s.get("distance")||0,b=u.getBaseAxis(),p=b.isHorizontal(),m=b.inverse,S=a.shape,A=m?p?S.x:S.y+S.height:p?S.x+S.width:S.y,_=(p?d:0)*(m?-1:1),D=(p?0:-d)*(m?-1:1),w=p?"x":"y",T=zi(v,A,w),P=T.range,C=P[1]-P[0],y=void 0;if(C>=1){if(C>1&&!h){var x=ze(v,P[0]);l.attr({x:x[0]+_,y:x[1]+D}),o&&(y=g.getRawValue(P[0]))}else{var x=c.getPointOn(A,w);x&&l.attr({x:x[0]+_,y:x[1]+D});var L=g.getRawValue(P[0]),k=g.getRawValue(P[1]);o&&(y=hr(i,f,L,k,T.t))}n.lastFrameIndex=P[0]}else{var I=t===1||n.lastFrameIndex>0?P[0]:0,x=ze(v,I);o&&(y=g.getRawValue(I)),l.attr({x:x[0]+_,y:x[1]+D})}if(o){var O=na(l);typeof O.setLabelText=="function"&&O.setLabelText(y)}}},e.prototype._doUpdateAnimation=function(t,a,i,n,o,s,u){var l=this._polyline,c=this._polygon,v=t.hostModel,g=Li(this._data,t,this._stackedOnPoints,a,this._coordSys,i,this._valueOrigin),h=g.current,f=g.stackedOnCurrent,d=g.next,b=g.stackedOnNext;if(o&&(f=Q(g.stackedOnCurrent,g.current,i,o,u),h=Q(g.current,null,i,o,u),b=Q(g.stackedOnNext,g.next,i,o,u),d=Q(g.next,null,i,o,u)),Ve(h,d)>3e3||c&&Ve(f,b)>3e3){l.stopAnimation(),l.setShape({points:d}),c&&(c.stopAnimation(),c.setShape({points:d,stackedOnPoints:b}));return}l.shape.__points=g.current,l.shape.points=h;var p={shape:{points:d}};g.current!==h&&(p.shape.__points=g.next),l.stopAnimation(),q(l,p,v),c&&(c.setShape({points:h,stackedOnPoints:f}),c.stopAnimation(),q(c,{shape:{stackedOnPoints:b}},v),l.shape.points!==c.shape.points&&(c.shape.points=l.shape.points));for(var m=[],S=g.status,A=0;A<S.length;A++){var _=S[A].cmd;if(_==="="){var D=t.getItemGraphicEl(S[A].idx1);D&&m.push({el:D,ptIdx:A})}}l.animators&&l.animators.length&&l.animators[0].during(function(){c&&c.dirtyShape();for(var w=l.shape.__points,T=0;T<m.length;T++){var P=m[T].el,C=m[T].ptIdx*2;P.x=w[C],P.y=w[C+1],P.markRedraw()}})},e.prototype.remove=function(t){var a=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(n,o){n.__temp&&(a.remove(n),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(At);function Wi(r,e){return{seriesType:r,plan:dr(),reset:function(t){var a=t.getData(),i=t.coordinateSystem;if(t.pipelineContext,!!i){var n=z(i.dimensions,function(v){return a.mapDimension(v)}).slice(0,2),o=n.length,s=a.getCalculationInfo("stackResultDimension");Dt(a,n[0])&&(n[0]=s),Dt(a,n[1])&&(n[1]=s);var u=a.getStore(),l=a.getDimensionIndex(n[0]),c=a.getDimensionIndex(n[1]);return o&&{progress:function(v,g){for(var h=v.end-v.start,f=st(h*o),d=[],b=[],p=v.start,m=0;p<v.end;p++){var S=void 0;if(o===1){var A=u.get(l,p);S=i.dataToPoint(A,null,b)}else d[0]=u.get(l,p),d[1]=u.get(c,p),S=i.dataToPoint(d,null,b);f[m++]=S[0],f[m++]=S[1]}g.setLayout("points",f)}}}}}}var Hi={average:function(r){for(var e=0,t=0,a=0;a<r.length;a++)isNaN(r[a])||(e+=r[a],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},Xi=function(r){return Math.round(r.length/2)};function _a(r){return{seriesType:r,reset:function(e,t,a){var i=e.getData(),n=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&n){var u=o.getBaseAxis(),l=o.getOtherAxis(u),c=u.getExtent(),v=a.getDevicePixelRatio(),g=Math.abs(c[1]-c[0])*(v||1),h=Math.round(s/g);if(isFinite(h)&&h>1){n==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(l.dim),1/h)):n==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(l.dim),1/h));var f=void 0;pr(n)?f=Hi[n]:tt(n)&&(f=n),f&&e.setData(i.downSample(i.mapDimension(l.dim),1/h,f,Xi))}}}}}function Zi(r){r.registerChartView(Fi),r.registerSeriesModel(Di),r.registerLayout(Wi("line")),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,_a("line"))}var Ut=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,a){return te(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,a,i){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.clampData(t),s=n.dataToPoint(o);if(i)R(n.getAxes(),function(g,h){if(g.type==="category"&&a!=null){var f=g.getTicksCoords(),d=g.getTickModel().get("alignWithLabel"),b=o[h],p=a[h]==="x1"||a[h]==="y1";if(p&&!d&&(b+=1),f.length<2)return;if(f.length===2){s[h]=g.toGlobalCoord(g.getExtent()[p?1:0]);return}for(var m=void 0,S=void 0,A=1,_=0;_<f.length;_++){var D=f[_].coord,w=_===f.length-1?f[_-1].tickValue+A:f[_].tickValue;if(w===b){S=D;break}else if(w<b)m=D;else if(m!=null&&w>b){S=(D+m)/2;break}_===1&&(A=w-f[0].tickValue)}S==null&&(m?m&&(S=f[f.length-1].coord):S=f[0].coord),s[h]=g.toGlobalCoord(S)}});else{var u=this.getData(),l=u.getLayout("offset"),c=u.getLayout("size"),v=n.getBaseAxis().isHorizontal()?0:1;s[v]+=l+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Jt);Jt.registerClass(Ut);var $i=function(r){N(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return te(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>t&&(t=a),t},e.prototype.brushSelector=function(t,a,i){return i.rect(a.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=mr(Ut.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Ut),Ui=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Be=function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="sausage",a}return e.prototype.getDefaultShape=function(){return new Ui},e.prototype.buildPath=function(t,a){var i=a.cx,n=a.cy,o=Math.max(a.r0||0,0),s=Math.max(a.r,0),u=(s-o)*.5,l=o+u,c=a.startAngle,v=a.endAngle,g=a.clockwise,h=Math.PI*2,f=g?v-c<h:c-v<h;f||(c=v-(g?h:-h));var d=Math.cos(c),b=Math.sin(c),p=Math.cos(v),m=Math.sin(v);f?(t.moveTo(d*o+i,b*o+n),t.arc(d*l+i,b*l+n,u,-Math.PI+c,c,!g)):t.moveTo(d*s+i,b*s+n),t.arc(i,n,s,c,v,!g),t.arc(p*l+i,m*l+n,u,v-Math.PI*2,v-Math.PI,!g),o!==0&&t.arc(i,n,o,v,c,g)},e}(Ct);function Yi(r,e){e=e||{};var t=e.isRoundCap;return function(a,i,n){var o=i.position;if(!o||o instanceof Array)return _e(a,i,n);var s=r(o),u=i.distance!=null?i.distance:5,l=this.shape,c=l.cx,v=l.cy,g=l.r,h=l.r0,f=(g+h)/2,d=l.startAngle,b=l.endAngle,p=(d+b)/2,m=t?Math.abs(g-h)/2:0,S=Math.cos,A=Math.sin,_=c+g*S(d),D=v+g*A(d),w="left",T="top";switch(s){case"startArc":_=c+(h-u)*S(p),D=v+(h-u)*A(p),w="center",T="top";break;case"insideStartArc":_=c+(h+u)*S(p),D=v+(h+u)*A(p),w="center",T="bottom";break;case"startAngle":_=c+f*S(d)+bt(d,u+m,!1),D=v+f*A(d)+St(d,u+m,!1),w="right",T="middle";break;case"insideStartAngle":_=c+f*S(d)+bt(d,-u+m,!1),D=v+f*A(d)+St(d,-u+m,!1),w="left",T="middle";break;case"middle":_=c+f*S(p),D=v+f*A(p),w="center",T="middle";break;case"endArc":_=c+(g+u)*S(p),D=v+(g+u)*A(p),w="center",T="bottom";break;case"insideEndArc":_=c+(g-u)*S(p),D=v+(g-u)*A(p),w="center",T="top";break;case"endAngle":_=c+f*S(b)+bt(b,u+m,!0),D=v+f*A(b)+St(b,u+m,!0),w="left",T="middle";break;case"insideEndAngle":_=c+f*S(b)+bt(b,-u+m,!0),D=v+f*A(b)+St(b,-u+m,!0),w="right",T="middle";break;default:return _e(a,i,n)}return a=a||{},a.x=_,a.y=D,a.align=w,a.verticalAlign=T,a}}function ji(r,e,t,a){if(Kt(a)){r.setTextConfig({rotation:a});return}else if(gt(e)){r.setTextConfig({rotation:0});return}var i=r.shape,n=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(n+o)/2,u,l=t(e);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":u=s;break;case"startAngle":case"insideStartAngle":u=n;break;case"endAngle":case"insideEndAngle":u=o;break;default:r.setTextConfig({rotation:0});return}var c=Math.PI*1.5-u;l==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),r.setTextConfig({rotation:c})}function bt(r,e,t){return e*Math.sin(r)*(t?-1:1)}function St(r,e,t){return e*Math.cos(r)*(t?1:-1)}var Rt=Math.max,Nt=Math.min;function qi(r,e){var t=r.getArea&&r.getArea();if(ie(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var i=e.getLayout("bandWidth");a.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var Ji=function(r){N(e,r);function e(){var t=r.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,a,i,n){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,a,i):this._renderNormal(t,a,i,n))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,a){this._progressiveEls=[],this._incrementalRenderLarge(t,a)},e.prototype.eachRendered=function(t){ia(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var a=t.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},e.prototype._renderNormal=function(t,a,i,n){var o=this.group,s=t.getData(),u=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),v;l.type==="cartesian2d"?v=c.isHorizontal():l.type==="polar"&&(v=c.dim==="angle");var g=t.isAnimationEnabled()?t:null,h=Ki(t,l);h&&this._enableRealtimeSort(h,s,i);var f=t.get("clip",!0)||h,d=qi(l,s);o.removeClipPath();var b=t.get("roundCap",!0),p=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),S=m.get("borderRadius")||0,A=[],_=this._backgroundEls,D=n&&n.isInitSort,w=n&&n.type==="changeAxisOrder";function T(y){var x=xt[l.type](s,y),L=on(l,v,x);return L.useStyle(m.getItemStyle()),l.type==="cartesian2d"?L.setShape("r",S):L.setShape("cornerRadius",S),A[y]=L,L}s.diff(u).add(function(y){var x=s.getItemModel(y),L=xt[l.type](s,y,x);if(p&&T(y),!(!s.hasValue(y)||!Ze[l.type](L))){var k=!1;f&&(k=Fe[l.type](d,L));var I=We[l.type](t,s,y,L,v,g,c.model,!1,b);h&&(I.forceLabelAnimation=!0),$e(I,s,y,x,L,t,v,l.type==="polar"),D?I.attr({shape:L}):h?He(h,g,I,L,y,v,!1,!1):et(I,{shape:L},t,y),s.setItemGraphicEl(y,I),o.add(I),I.ignore=k}}).update(function(y,x){var L=s.getItemModel(y),k=xt[l.type](s,y,L);if(p){var I=void 0;_.length===0?I=T(x):(I=_[x],I.useStyle(m.getItemStyle()),l.type==="cartesian2d"?I.setShape("r",S):I.setShape("cornerRadius",S),A[y]=I);var O=xt[l.type](s,y),G=wa(v,O,l);q(I,{shape:G},g,y)}var E=u.getItemGraphicEl(x);if(!s.hasValue(y)||!Ze[l.type](k)){o.remove(E);return}var V=!1;if(f&&(V=Fe[l.type](d,k),V&&o.remove(E)),E?ra(E):E=We[l.type](t,s,y,k,v,g,c.model,!!E,b),h&&(E.forceLabelAnimation=!0),w){var F=E.getTextContent();if(F){var W=na(F);W.prevValue!=null&&(W.prevValue=W.value)}}else $e(E,s,y,L,k,t,v,l.type==="polar");D?E.attr({shape:k}):h?He(h,g,E,k,y,v,!0,w):q(E,{shape:k},t,y,null),s.setItemGraphicEl(y,E),E.ignore=V,o.add(E)}).remove(function(y){var x=u.getItemGraphicEl(y);x&&De(x,t,y)}).execute();var P=this._backgroundGroup||(this._backgroundGroup=new ct);P.removeAll();for(var C=0;C<A.length;++C)P.add(A[C]);o.add(P),this._backgroundEls=A,this._data=s},e.prototype._renderLarge=function(t,a,i){this._clear(),Ye(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,a){this._removeBackground(),Ye(a,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var a=t.get("clip",!0)&&Ti(t.coordinateSystem,!1,t),i=this.group;a?i.setClipPath(a):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,a,i){var n=this;if(a.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,t,i),this._isFirstFrame=!1;else{var s=function(u){var l=a.getItemGraphicEl(u),c=l&&l.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){n._updateSortWithinSameData(a,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,a,i){var n=[];return t.each(t.mapDimension(a.dim),function(o,s){var u=i(s);u=u??NaN,n.push({dataIndex:s,mappedValue:u,ordinalNumber:o})}),n.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:z(n,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,a,i){for(var n=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,u=0,l=n.getOrdinalMeta().categories.length;u<l;++u){var c=t.rawIndexOf(o,n.getRawOrdinalNumber(u)),v=c<0?Number.MIN_VALUE:a(t.indexOfRawIndex(c));if(v>s)return!0;s=v}return!1},e.prototype._isOrderDifferentInView=function(t,a){for(var i=a.scale,n=i.getExtent(),o=Math.max(0,n[0]),s=Math.min(n[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,a,i,n){if(this._isOrderChangedWithinSameData(t,a,i)){var o=this._dataSort(t,i,a);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,a,i){var n=a.baseAxis,o=this._dataSort(t,n,function(s){return t.get(t.mapDimension(a.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:o})},e.prototype.remove=function(t,a){this._clear(this._model),this._removeOnRenderedListener(a)},e.prototype.dispose=function(t,a){this._removeOnRenderedListener(a)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var a=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(n){De(n,t,j(n).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(At),Fe={cartesian2d:function(r,e){var t=e.width<0?-1:1,a=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height);var i=r.x+r.width,n=r.y+r.height,o=Rt(e.x,r.x),s=Nt(e.x+e.width,i),u=Rt(e.y,r.y),l=Nt(e.y+e.height,n),c=s<o,v=l<u;return e.x=c&&o>i?s:o,e.y=v&&u>n?l:u,e.width=c?0:s-o,e.height=v?0:l-u,t<0&&(e.x+=e.width,e.width=-e.width),a<0&&(e.y+=e.height,e.height=-e.height),c||v},polar:function(r,e){var t=e.r0<=e.r?1:-1;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}var i=Nt(e.r,r.r),n=Rt(e.r0,r.r0);e.r=i,e.r0=n;var o=i-n<0;if(t<0){var a=e.r;e.r=e.r0,e.r0=a}return o}},We={cartesian2d:function(r,e,t,a,i,n,o,s,u){var l=new ut({shape:ht({},a),z2:1});if(l.__dataIndex=t,l.name="item",n){var c=l.shape,v=i?"height":"width";c[v]=0}return l},polar:function(r,e,t,a,i,n,o,s,u){var l=!i&&u?Be:Qt,c=new l({shape:a,z2:1});c.name="item";var v=Da(i);if(c.calculateTextPosition=Yi(v,{isRoundCap:l===Be}),n){var g=c.shape,h=i?"r":"endAngle",f={};g[h]=i?a.r0:a.startAngle,f[h]=a[h],(s?q:et)(c,{shape:f},n)}return c}};function Ki(r,e){var t=r.get("realtimeSort",!0),a=e.getBaseAxis();if(t&&a.type==="category"&&e.type==="cartesian2d")return{baseAxis:a,otherAxis:e.getOtherAxis(a)}}function He(r,e,t,a,i,n,o,s){var u,l;n?(l={x:a.x,width:a.width},u={y:a.y,height:a.height}):(l={y:a.y,height:a.height},u={x:a.x,width:a.width}),s||(o?q:et)(t,{shape:u},e,i,null);var c=e?r.baseAxis.model:null;(o?q:et)(t,{shape:l},c,i)}function Xe(r,e){for(var t=0;t<e.length;t++)if(!isFinite(r[e[t]]))return!0;return!1}var Qi=["x","y","width","height"],tn=["cx","cy","r","startAngle","endAngle"],Ze={cartesian2d:function(r){return!Xe(r,Qi)},polar:function(r){return!Xe(r,tn)}},xt={cartesian2d:function(r,e,t){var a=r.getItemLayout(e),i=t?an(t,a):0,n=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+n*i/2,y:a.y+o*i/2,width:a.width-n*i,height:a.height-o*i}},polar:function(r,e,t){var a=r.getItemLayout(e);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function en(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Da(r){return function(e){var t=e?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+t;default:return a}}}(r)}function $e(r,e,t,a,i,n,o,s){var u=e.getItemVisual(t,"style");if(s){if(!n.get("roundCap")){var c=r.shape,v=yr(a.getModel("itemStyle"),c,!0);ht(c,v),r.setShape(c)}}else{var l=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",l)}r.useStyle(u);var g=a.getShallow("cursor");g&&r.attr("cursor",g);var h=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=wt(a);qt(r,f,{labelFetcher:n,labelDataIndex:t,defaultText:ae(n.getData(),t),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:h});var d=r.getTextContent();if(s&&d){var b=a.get(["label","position"]);r.textConfig.inside=b==="middle"?!0:null,ji(r,b==="outside"?h:b,Da(o),a.get(["label","rotate"]))}br(d,f,n.getRawValue(t),function(m){return pa(e,m)});var p=a.getModel(["emphasis"]);_t(r,p.get("focus"),p.get("blurScope"),p.get("disabled")),Wt(r,a),en(i)&&(r.style.fill="none",r.style.stroke="none",R(r.states,function(m){m.style&&(m.style.fill=m.style.stroke="none")}))}function an(r,e){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),n=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(a,i,n)}var rn=function(){function r(){}return r}(),Ue=function(r){N(e,r);function e(t){var a=r.call(this,t)||this;return a.type="largeBar",a}return e.prototype.getDefaultShape=function(){return new rn},e.prototype.buildPath=function(t,a){for(var i=a.points,n=this.baseDimIdx,o=1-this.baseDimIdx,s=[],u=[],l=this.barWidth,c=0;c<i.length;c+=3)u[n]=l,u[o]=i[c+2],s[n]=i[c+n],s[o]=i[c+o],t.rect(s[0],s[1],u[0],u[1])},e}(Ct);function Ye(r,e,t,a){var i=r.getData(),n=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),u=r.getModel("backgroundStyle"),l=i.getLayout("largeBackgroundPoints");if(l){var c=new Ue({shape:{points:l},incremental:!!a,silent:!0,z2:0});c.baseDimIdx=n,c.largeDataIndices=o,c.barWidth=s,c.useStyle(u.getItemStyle()),e.add(c),t&&t.push(c)}var v=new Ue({shape:{points:i.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});v.baseDimIdx=n,v.largeDataIndices=o,v.barWidth=s,e.add(v),v.useStyle(i.getVisual("style")),v.style.stroke=null,j(v).seriesIndex=r.seriesIndex,r.get("silent")||(v.on("mousedown",je),v.on("mousemove",je)),t&&t.push(v)}var je=Sr(function(r){var e=this,t=nn(e,r.offsetX,r.offsetY);j(e).dataIndex=t>=0?t:null},30,!1);function nn(r,e,t){for(var a=r.baseDimIdx,i=1-a,n=r.shape.points,o=r.largeDataIndices,s=[],u=[],l=r.barWidth,c=0,v=n.length/3;c<v;c++){var g=c*3;if(u[a]=l,u[i]=n[g+2],s[a]=n[g+a],s[i]=n[g+i],u[i]<0&&(s[i]+=u[i],u[i]=-u[i]),e>=s[0]&&e<=s[0]+u[0]&&t>=s[1]&&t<=s[1]+u[1])return o[c]}return-1}function wa(r,e,t){if(ie(t,"cartesian2d")){var a=e,i=t.getArea();return{x:r?a.x:i.x,y:r?i.y:a.y,width:r?a.width:i.width,height:r?i.height:a.height}}else{var i=t.getArea(),n=e;return{cx:i.cx,cy:i.cy,r0:r?i.r0:n.r0,r:r?i.r:n.r,startAngle:r?n.startAngle:0,endAngle:r?n.endAngle:Math.PI*2}}}function on(r,e,t){var a=r.type==="polar"?Qt:ut;return new a({shape:wa(e,t,r),silent:!0,z2:0})}function sn(r){r.registerChartView(Ji),r.registerSeriesModel($i),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Je(xr,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ar("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,_a("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var a=e.componentType||"series";t.eachComponent({mainType:a,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}const ln={class:"stats-container"},un={class:"page-header"},cn={class:"date-filter"},vn=["onClick"],hn={class:"stats-row"},fn={class:"stat-card"},gn={class:"stat-value"},dn={class:"stat-card"},pn={class:"stat-value"},mn={class:"stat-card"},yn={class:"stat-value"},bn={class:"stat-card"},Sn={class:"stat-value"},xn={class:"charts-container"},An={class:"chart-wrapper"},_n={class:"chart-wrapper"},Dn={class:"mastery-section"},wn={class:"mastery-chart-container"},Cn={class:"decks-analysis"},Ln={key:0,class:"empty-state"},In={key:1,class:"decks-progress"},kn={class:"deck-info"},Mn={class:"deck-name"},Tn={class:"deck-progress-value"},Pn={class:"deck-progress-bar"},En={class:"recent-activity"},On={key:0,class:"empty-state"},Rn={key:1,class:"activity-timeline"},Nn={class:"day-header"},Vn={class:"day-date"},Gn={class:"day-cards"},zn={class:"session-time"},Bn={class:"session-details"},Fn={class:"session-cards"},Wn={class:"session-accuracy"},Hn={__name:"Stats",setup(r){zt([Zi,Dr,sn,xi,wr,Cr,yi,Lr]);const e=Ca(),t=Ia(),a=ka(),i=Ir(),n=pt(null),o=pt(null),s=pt(null);let u=null,l=null,c=null;const v=pt("week"),g=[{value:"week",label:"本周"},{value:"month",label:"本月"},{value:"year",label:"本年"},{value:"all",label:"全部"}],h=nt(()=>e.studyStats),f=nt(()=>h.value.sessionHistory||[]),d=nt(()=>i.streak),b=nt(()=>a.allDecks),p=nt(()=>{const C=new Date,y=[...f.value];switch(v.value){case"week":{const x=new Date(C);return x.setDate(C.getDate()-C.getDay()),x.setHours(0,0,0,0),y.filter(L=>new Date(L.date)>=x)}case"month":{const x=new Date(C.getFullYear(),C.getMonth(),1);return y.filter(L=>new Date(L.date)>=x)}case"year":{const x=new Date(C.getFullYear(),0,1);return y.filter(L=>new Date(L.date)>=x)}default:return y}}),m=nt(()=>{const C={};return p.value.forEach(y=>{C[y.date]||(C[y.date]={date:y.date,sessions:[]}),C[y.date].sessions.push({...y,timestamp:y.date})}),Object.values(C).sort((y,x)=>new Date(x.date)-new Date(y.date))});function S(){if(f.value.length===0)return 0;const C=new Set(f.value.map(x=>x.date)).size;if(C===0)return 0;const y=f.value.reduce((x,L)=>x+L.cards,0);return Math.round(y/C)}function A(C){const y=t.getCardsByDeck(C);if(y.length===0)return 0;const x=y.filter(L=>{const k=t.getCardProgress(L.id);return k.repetitions>=3&&k.easeFactor>2});return Math.round(x.length/y.length*100)}function _(){if(!n.value)return;u&&u.dispose(),u=Mt(n.value);const C=[],y=[],x=new Date;let L=new Date;switch(v.value){case"week":L.setDate(x.getDate()-7);break;case"month":L.setDate(x.getDate()-30);break;case"year":L.setDate(x.getDate()-365);break;default:if(f.value.length>0){const I=f.value.reduce((O,G)=>new Date(G.date)<new Date(O.date)?G:O);L=new Date(I.date)}else L.setDate(x.getDate()-7)}for(let I=new Date(L);I<=x;I.setDate(I.getDate()+1)){const O=I.toISOString().split("T")[0];C.push(O);const G=f.value.find(E=>E.date===O);y.push(G?G.cards:0)}const k={grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",formatter:"{b}: {c} 张卡片"},xAxis:{type:"category",boundaryGap:!1,data:C.map(I=>I.slice(5)),axisLabel:{interval:Math.ceil(C.length/10)}},yAxis:{type:"value",axisLabel:{formatter:"{value} 张"}},series:[{name:"已学习",type:"line",data:y,smooth:!0,lineStyle:{color:"#4a6baf"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(74, 107, 175, 0.3)"},{offset:1,color:"rgba(74, 107, 175, 0.05)"}]}},itemStyle:{color:"#4a6baf"}}]};u.setOption(k),window.addEventListener("resize",()=>{u.resize()})}function D(){if(!o.value)return;l&&l.dispose(),l=Mt(o.value);const C=[],y=[],x=p.value;if(x.length===0){l.setOption({title:{text:"暂无数据",textStyle:{color:"#999",fontWeight:"normal"},left:"center",top:"center"}});return}x.sort((k,I)=>new Date(k.date)-new Date(I.date)),x.forEach(k=>{C.push(k.date.slice(5));const I=k.cards>0?Math.round(k.correct/k.cards*100):0;y.push(I)});const L={grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",formatter:"{b}: {c}%"},xAxis:{type:"category",data:C,axisLabel:{interval:Math.ceil(C.length/10)}},yAxis:{type:"value",min:0,max:100,axisLabel:{formatter:"{value}%"}},series:[{name:"正确率",type:"bar",data:y,itemStyle:{color:function(k){const I=k.value;return I>=80?"#4caf50":I>=60?"#ffc107":"#f44336"}}}]};l.setOption(L),window.addEventListener("resize",()=>{l.resize()})}function w(){if(!s.value)return;c&&c.dispose(),c=Mt(s.value);const C=La(t.cardsProgress),y={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:C.mastered,name:"已掌握",itemStyle:{color:"#4caf50"}},{value:C.learning,name:"学习中",itemStyle:{color:"#ffc107"}},{value:C.new,name:"待学习",itemStyle:{color:"#f44336"}}]}]};c.setOption(y),window.addEventListener("resize",()=>{c.resize()})}function T(C){if(!C)return"";const y=new Date(C),x=new Date;x.setHours(0,0,0,0);const L=new Date(x);return L.setDate(L.getDate()-1),y.toDateString()===x.toDateString()?"今天":y.toDateString()===L.toDateString()?"昨天":`${y.getFullYear()}-${(y.getMonth()+1).toString().padStart(2,"0")}-${y.getDate().toString().padStart(2,"0")}`}function P(C){if(!C)return"";const y=new Date(C);return`${y.getHours().toString().padStart(2,"0")}:${y.getMinutes().toString().padStart(2,"0")}`}return kr(v,()=>{_(),D()}),Mr(()=>{_(),D(),w()}),(C,y)=>(Z(),H("div",ln,[M("div",un,[y[0]||(y[0]=M("h1",null,"学习统计",-1)),M("div",cn,[(Z(),H(mt,null,yt(g,x=>M("button",{key:x.value,class:Pr(["period-btn",{active:v.value===x.value}]),onClick:L=>v.value=x.value},X(x.label),11,vn)),64))])]),M("div",hn,[M("div",fn,[y[1]||(y[1]=M("div",{class:"stat-title"},"总复习次数",-1)),M("div",gn,X(h.value.totalReviews),1)]),M("div",dn,[y[2]||(y[2]=M("div",{class:"stat-title"},"正确率",-1)),M("div",pn,X(Math.round(h.value.correctReviews/h.value.totalReviews*100)||0)+"%",1)]),M("div",mn,[y[3]||(y[3]=M("div",{class:"stat-title"},"平均每日复习",-1)),M("div",yn,X(S()),1)]),M("div",bn,[y[4]||(y[4]=M("div",{class:"stat-title"},"最长连续学习",-1)),M("div",Sn,X(d.value.highest)+"天",1)])]),M("div",xn,[M("div",An,[y[5]||(y[5]=M("h2",null,"学习活动",-1)),M("div",{class:"chart",ref_key:"activityChart",ref:n},null,512)]),M("div",_n,[y[6]||(y[6]=M("h2",null,"复习正确率",-1)),M("div",{class:"chart",ref_key:"accuracyChart",ref:o},null,512)])]),M("div",Dn,[y[8]||(y[8]=M("h2",null,"卡片掌握状态",-1)),M("div",wn,[M("div",{class:"mastery-chart",ref_key:"masteryChart",ref:s},null,512),y[7]||(y[7]=Tr('<div class="mastery-legend" data-v-a66155b9><div class="legend-item" data-v-a66155b9><div class="legend-color" style="background-color:#4caf50;" data-v-a66155b9></div><div class="legend-label" data-v-a66155b9>已掌握</div></div><div class="legend-item" data-v-a66155b9><div class="legend-color" style="background-color:#ffc107;" data-v-a66155b9></div><div class="legend-label" data-v-a66155b9>学习中</div></div><div class="legend-item" data-v-a66155b9><div class="legend-color" style="background-color:#f44336;" data-v-a66155b9></div><div class="legend-label" data-v-a66155b9>待学习</div></div></div>',1))])]),M("div",Cn,[y[9]||(y[9]=M("h2",null,"卡片集进度",-1)),b.value.length===0?(Z(),H("div",Ln," 还没有创建任何卡片集 ")):(Z(),H("div",In,[(Z(!0),H(mt,null,yt(b.value,x=>(Z(),H("div",{key:x.id,class:"deck-progress-item"},[M("div",kn,[M("div",Mn,X(x.title),1),M("div",Tn,X(A(x.id))+"%",1)]),M("div",Pn,[M("div",{class:"progress-fill",style:Er({width:A(x.id)+"%"})},null,4)])]))),128))]))]),M("div",En,[y[10]||(y[10]=M("h2",null,"最近活动",-1)),p.value.length===0?(Z(),H("div",On," 没有最近的学习记录 ")):(Z(),H("div",Rn,[(Z(!0),H(mt,null,yt(m.value,(x,L)=>(Z(),H("div",{key:L,class:"activity-day"},[M("div",Nn,[M("div",Vn,X(T(x.date)),1),M("div",Gn,"学习了 "+X(x.sessions.reduce((k,I)=>k+I.cards,0))+" 张卡片",1)]),(Z(!0),H(mt,null,yt(x.sessions,(k,I)=>(Z(),H("div",{key:I,class:"activity-session"},[M("div",zn,X(P(k.timestamp)),1),M("div",Bn,[M("div",Fn,X(k.cards)+"张卡片",1),M("div",Wn," 正确率: "+X(Math.round(k.correct/k.cards*100))+"% ",1)])]))),128))]))),128))]))])]))}},Un=_r(Hn,[["__scopeId","data-v-a66155b9"]]);export{Un as default};
